# LG_STT ??gRPC ASR Client (C#/.NET 8)

??콘솔 ?? NAudio?마이???력??캡처??gRPC ?방???트리밍?로 ASR ?버???송?고, ?식 결과?JSON/?스?로 출력?니?? ?심 진입?? `Program.cs:44`??`Main`?니??

## 개요
- ?플?이?? 기본 8kHz (`Program.cs:20`)
- ?송 ?: 200ms (`Program.cs:21-23`)
- ?버 초기??OK ?태 ?후 ?디???송 ?작 (`Program.cs:78-86`, `Program.cs:196-204`)
- 결과(JSON/?스?? ?시??시, `F`(Final ?청) ?는 `Enter`(종료)??션 종료

## 구조
- gRPC ?비??메시지: `Protos/recognizer.proto:14-16` (Recognize, ?방???트리밍)
- ?청 oneof: Init/Audio/End (`Protos/recognizer.proto:24-30`)
- 결과 메시지: Result/Hypothesis/Word (`Protos/rapeech/asr/v1/result.proto:15-20`, `Protos/rapeech/asr/v1/result.proto:41-50`)
- 빌드??`Grpc.Tools`가 C# ?라?언??코드??성?니??(`SttClient.csproj:18`)

## ?작 ?름
1) gRPC 채널/?라?언???성 (`Program.cs:49-56`)
2) 초기??메시지 ?송 (?라미터/CallId/ChannelType/Data) (`Program.cs:107-129`)
3) 마이??캡처 ?작, ?에 바이??버퍼 ?재 (`Program.cs:231-299`)
4) 200ms ?위??디??? ?송 ??이??(`Program.cs:172-210`)
5) ?답 ?신 루프: Status?초기???인 ??Result ?신 ??JSON/?스???시 (`Program.cs:75-99`)
6) 종료: `F`?Final ?청 ?는 `Enter/??아?? ??End ?송+?트??료 (`Program.cs:133-146`, `Program.cs:313-317`)

## 주요 ?정?- ?버 주소: `ADDRESS` (`Program.cs:19`)
- ?플?이???: `TARGET_SR`, `CHUNK_SEC`, `CHUNK_BYTES` (`Program.cs:20-23`)
- ?증/?책/?넌???더: `AUTH_BEARER`, `SESSION_POLICY_ID`, `TENANT_ID` + ?용 (`Program.cs:25-28`, `Program.cs:50-53`)
- Init ?이??? client/custom_number/user_exten/channel_type/engine (`Program.cs:30-35`, `Program.cs:122-126`)
- 결과/?식 ?형: `RESULT_TYPE`, `RECOG_TYPE` (`Program.cs:37-38`)

## ?디??캡처
- ?선 `WaveInEvent`(MME) ?용, ?패 ??`WasapiCapture`??백 (`Program.cs:231-299`)
- ?맷: 모노 16bit PCM, ?플?이?는 `TARGET_SR` ?용
- WASAPI float ?맷 ??16bit PCM 변???????재 (`Program.cs:268-284`)
- VU ?시: RMS 기반 막? 출력 (`Program.cs:419-433`)

## 결과 처리
- ?본 JSON 출력 (`Program.cs:91-92`)
- ?스??추출: 리플?션 ??????색 (`Program.cs:347-417`)
  - `Text`/`Transcript`/`Alternatives`/`Words`/JSON ??"transcript"/"text"/"utterance") ?차 ?색
  - `Final`/`IsFinal` 추출 ??`(FINAL)` ?시

## ?행 방법
?전 ?구?항: Windows, .NET 8 SDK, 마이??권한

- ?키지 복원 ??행
  - 마이??모드: `dotnet run`
  - ?일 ?력 모드: `dotnet run -- --file test2.wav`
  - ?택 ?션(????지??
    - `--sr 8000|16000` ?플?이??변?기본 8000)
    - `--chunk-ms 100` ? ?기(ms) 변?기본 200)
    - `--result final|partial|immutable` 결과 ????청(기본 immutable)
    - `--tail-ms 700` ?일 모드?서 꼬리 무음 추?(기본 500, 0?면 비활??
    - `--gain 1.2` ?일 모드 볼륨 배율(0.1~3.0, 기본 1.0)
- ?버/보안 ?정
  - `ADDRESS`??제 gRPC ?드?인?로 변?(`http://` ?는 `https://`) (`Program.cs:19`)
  - ?요 ???증/?책/?넌???더 ?정 (`Program.cs:25-28`)
- 조작
  - `F`: Final ?청(?버??End 메시지 ?송)
  - `Enter`: ?션 종료(??아??`RECORD_SECONDS_TIMEOUT`??존재, 기본 600?

## ?주 ?는 변?- 16kHz ?환: `TARGET_SR = 16000` (`Program.cs:20`)
- HTTPS ?용: `ADDRESS`?`https://...`?변????버 ?증???뢰 구성 (`Program.cs:19`)
- 채널 ???변? `ChannelType.Rx`/`Tx` ?정 (`Program.cs:118-121`)
- 결과 ?태 조절: `RESULT_TYPE`/`RECOG_TYPE` ?정 (`Program.cs:37-38`)
- ?일 ?력 모드 추?(?션): ?재??마이?만 ?출. ?요 ??`test2.wav`??어 `queue`??공급?는 경로?추??????습?다.

## ?로?트
- ????레?워?? .NET 8 (`SttClient.csproj:5`)
- ?존?? `Google.Protobuf`, `Grpc.Net.Client`, `Grpc.Tools`, `NAudio` (`SttClient.csproj:11-17`)
- ?로???동 ?성: `Protos/**.proto` ???라?언??코드 (`SttClient.csproj:18`)

## 참고
- 콘솔 ?? 출력??깨질 경우, ?????코???트?UTF-8?맞추거나 ?일??UTF-8(BOM)?로 ??해 보세??

***
문의??개선 ?청(?일 ?력 모드, ?정??위? HTTPS ?정 ?????으??슈??겨 주세??
