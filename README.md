# LG_STT ??gRPC ASR Client (C#/.NET 8)

??肄섏넄 ?깆? NAudio濡?留덉씠???낅젰??罹≪쿂??gRPC ?묐갑???ㅽ듃由щ컢?쇰줈 ASR ?쒕쾭???꾩넚?섍퀬, ?몄떇 寃곌낵瑜?JSON/?띿뒪?몃줈 異쒕젰?⑸땲?? ?듭떖 吏꾩엯?먯? `Program.cs:44`??`Main`?낅땲??

## 媛쒖슂
- ?섑뵆?덉씠?? 湲곕낯 8kHz (`Program.cs:20`)
- ?꾩넚 泥?겕: 200ms (`Program.cs:21-23`)
- ?쒕쾭 珥덇린??OK ?곹깭 ?댄썑 ?ㅻ뵒???꾩넚 ?쒖옉 (`Program.cs:78-86`, `Program.cs:196-204`)
- 寃곌낵(JSON/?띿뒪?? ?ㅼ떆媛??쒖떆, `F`(Final ?붿껌) ?먮뒗 `Enter`(醫낅즺)濡??몄뀡 醫낅즺

## 援ъ“
- gRPC ?쒕퉬??硫붿떆吏: `Protos/recognizer.proto:14-16` (Recognize, ?묐갑???ㅽ듃由щ컢)
- ?붿껌 oneof: Init/Audio/End (`Protos/recognizer.proto:24-30`)
- 寃곌낵 硫붿떆吏: Result/Hypothesis/Word (`Protos/rapeech/asr/v1/result.proto:15-20`, `Protos/rapeech/asr/v1/result.proto:41-50`)
- 鍮뚮뱶??`Grpc.Tools`媛 C# ?대씪?댁뼵??肄붾뱶瑜??앹꽦?⑸땲??(`SttClient.csproj:18`)

## ?숈옉 ?먮쫫
1) gRPC 梨꾨꼸/?대씪?댁뼵???앹꽦 (`Program.cs:49-56`)
2) 珥덇린??硫붿떆吏 ?꾩넚 (?뚮씪誘명꽣/CallId/ChannelType/Data) (`Program.cs:107-129`)
3) 留덉씠??罹≪쿂 ?쒖옉, ?먯뿉 諛붿씠??踰꾪띁 ?곸옱 (`Program.cs:231-299`)
4) 200ms ?⑥쐞濡??ㅻ뵒??泥?겕 ?꾩넚 諛??섏씠??(`Program.cs:172-210`)
5) ?묐떟 ?섏떊 猷⑦봽: Status濡?珥덇린???뺤씤 ??Result ?섏떊 ??JSON/?띿뒪???쒖떆 (`Program.cs:75-99`)
6) 醫낅즺: `F`濡?Final ?붿껌 ?먮뒗 `Enter/??꾩븘?? ??End ?꾩넚+?ㅽ듃由??꾨즺 (`Program.cs:133-146`, `Program.cs:313-317`)

## 二쇱슂 ?ㅼ젙媛?- ?쒕쾭 二쇱냼: `ADDRESS` (`Program.cs:19`)
- ?섑뵆?덉씠??泥?겕: `TARGET_SR`, `CHUNK_SEC`, `CHUNK_BYTES` (`Program.cs:20-23`)
- ?몄쬆/?뺤콉/?뚮꼳???ㅻ뜑: `AUTH_BEARER`, `SESSION_POLICY_ID`, `TENANT_ID` + ?곸슜 (`Program.cs:25-28`, `Program.cs:50-53`)
- Init ?곗씠??留? client/custom_number/user_exten/channel_type/engine (`Program.cs:30-35`, `Program.cs:122-126`)
- 寃곌낵/?몄떇 ?좏삎: `RESULT_TYPE`, `RECOG_TYPE` (`Program.cs:37-38`)

## ?ㅻ뵒??罹≪쿂
- ?곗꽑 `WaveInEvent`(MME) ?ъ슜, ?ㅽ뙣 ??`WasapiCapture`濡??대갚 (`Program.cs:231-299`)
- ?щ㎎: 紐⑤끂 16bit PCM, ?섑뵆?덉씠?몃뒗 `TARGET_SR` ?곸슜
- WASAPI float ?щ㎎ ??16bit PCM 蹂???????곸옱 (`Program.cs:268-284`)
- VU ?쒖떆: RMS 湲곕컲 留됰? 異쒕젰 (`Program.cs:419-433`)

## 寃곌낵 泥섎━
- ?먮낯 JSON 異쒕젰 (`Program.cs:91-92`)
- ?띿뒪??異붿텧: 由ы뵆?됱뀡 諛??泥????먯깋 (`Program.cs:347-417`)
  - `Text`/`Transcript`/`Alternatives`/`Words`/JSON ??"transcript"/"text"/"utterance") ?쒖감 ?먯깋
  - `Final`/`IsFinal` 異붿텧 ??`(FINAL)` ?쒖떆

## ?ㅽ뻾 諛⑸쾿
?ъ쟾 ?붽뎄?ы빆: Windows, .NET 8 SDK, 留덉씠??沅뚰븳

- ?⑦궎吏 蹂듭썝 諛??ㅽ뻾
  - 留덉씠??紐⑤뱶: `dotnet run`
  - ?뚯씪 ?낅젰 紐⑤뱶: `dotnet run -- --file test2.wav`
  - ?좏깮 ?듭뀡(????吏??
    - `--sr 8000|16000` ?섑뵆?덉씠??蹂寃?湲곕낯 8000)
    - `--chunk-ms 100` 청크 크기(ms) 변경(기본 100)
    - `--result final|partial|immutable` 寃곌낵 ????붿껌(湲곕낯 immutable)
    - `--tail-ms 700` ?뚯씪 紐⑤뱶?먯꽌 瑗щ━ 臾댁쓬 異붽?(湲곕낯 500, 0?대㈃ 鍮꾪솢??
    - `--gain 1.2` ?뚯씪 紐⑤뱶 蹂쇰ⅷ 諛곗쑉(0.1~3.0, 湲곕낯 1.0)
- ?쒕쾭/蹂댁븞 ?ㅼ젙
  - `ADDRESS`瑜??ㅼ젣 gRPC ?붾뱶?ъ씤?몃줈 蹂寃?(`http://` ?먮뒗 `https://`) (`Program.cs:19`)
  - ?꾩슂 ???몄쬆/?뺤콉/?뚮꼳???ㅻ뜑 ?ㅼ젙 (`Program.cs:25-28`)
- 議곗옉
  - `F`: Final ?붿껌(?쒕쾭??End 硫붿떆吏 ?꾩넚)
  - `Enter`: ?몄뀡 醫낅즺(??꾩븘??`RECORD_SECONDS_TIMEOUT`??議댁옱, 湲곕낯 600珥?

## ?먯＜ ?섎뒗 蹂寃?- 16kHz ?꾪솚: `TARGET_SR = 16000` (`Program.cs:20`)
- HTTPS ?ъ슜: `ADDRESS`瑜?`https://...`濡?蹂寃????쒕쾭 ?몄쬆???좊ː 援ъ꽦 (`Program.cs:19`)
- 梨꾨꼸 ???蹂寃? `ChannelType.Rx`/`Tx` ?ㅼ젙 (`Program.cs:118-121`)
- 寃곌낵 ?뺥깭 議곗젅: `RESULT_TYPE`/`RECOG_TYPE` ?섏젙 (`Program.cs:37-38`)
- ?뚯씪 ?낅젰 紐⑤뱶 異붽?(?듭뀡): ?꾩옱??留덉씠?щ쭔 ?≪텧. ?꾩슂 ??`test2.wav`瑜??쎌뼱 `queue`??怨듦툒?섎뒗 寃쎈줈瑜?異붽??????덉뒿?덈떎.

## ?꾨줈?앺듃
- ????꾨젅?꾩썙?? .NET 8 (`SttClient.csproj:5`)
- ?섏〈?? `Google.Protobuf`, `Grpc.Net.Client`, `Grpc.Tools`, `NAudio` (`SttClient.csproj:11-17`)
- ?꾨줈???먮룞 ?앹꽦: `Protos/**.proto` ???대씪?댁뼵??肄붾뱶 (`SttClient.csproj:18`)

## 李멸퀬
- 肄섏넄 ?쒓? 異쒕젰??源⑥쭏 寃쎌슦, ?곕????몄퐫???고듃瑜?UTF-8濡?留욎텛嫄곕굹 ?뚯씪??UTF-8(BOM)?쇰줈 ??ν빐 蹂댁꽭??

***
臾몄쓽??媛쒖꽑 ?붿껌(?뚯씪 ?낅젰 紐⑤뱶, ?ㅼ젙媛??ㅼ쐞移? HTTPS ?ㅼ젙 ?????덉쑝硫??댁뒋濡??④꺼 二쇱꽭??

